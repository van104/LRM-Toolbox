<template>
  <div class="changelog-page">
    <!-- Header Section -->
    <header class="changelog-header animate-fade-in">
      <div class="container">
        <h1 class="gradient-title">æ¼”è¿›ä¹‹è·¯</h1>
        <p class="subtitle">è®°å½• LRM å·¥å…·ç®±ä»ç¬¬ä¸€ä¸ªç‰ˆæœ¬åˆ°ç°åœ¨çš„æˆé•¿å†ç¨‹</p>
        <div class="stats-bar">
          <div class="stat-item">
            <span class="stat-value">168+</span>
            <span class="stat-label">é›†æˆå·¥å…·</span>
          </div>
          <div class="stat-divider"></div>
          <div class="stat-item">
            <span class="stat-value">v1.9.0</span>
            <span class="stat-label">å½“å‰ç‰ˆæœ¬</span>
          </div>
          <div class="stat-divider"></div>
          <div class="stat-item">
            <span class="stat-value">Alpha</span>
            <span class="stat-label">é˜¶æ®µ</span>
          </div>
        </div>
      </div>
    </header>

    <!-- Roadmap / Timeline Section -->
    <main class="timeline-container container">
      <div class="timeline-main">
        <div
          v-for="(release, index) in releases"
          :key="release.version"
          v-observe-visibility="onVisibilityChange"
          :class="['timeline-node', { 'is-latest': index === 0 }]"
        >
          <div class="node-marker">
            <div class="node-circle"></div>
            <div class="node-line"></div>
          </div>

          <div class="node-content glass-card animate-slide-up">
            <div class="node-header">
              <div class="version-badge" :style="{ background: release.color }">
                {{ release.version }}
              </div>
              <time class="node-date">{{ release.date }}</time>
              <div v-if="index === 0" class="latest-label">CURRENT</div>
            </div>

            <h3 class="node-title">{{ release.title }}</h3>

            <div class="change-groups">
              <div v-for="group in release.groups" :key="group.label" class="change-group">
                <h4 class="group-label" :style="{ color: group.color }">
                  <span class="group-icon">{{ group.icon }}</span>
                  {{ group.label }}
                </h4>
                <ul class="change-items">
                  <li v-for="item in group.items" :key="item">{{ item }}</li>
                </ul>
              </div>
            </div>

            <div v-if="release.note" class="node-footer">
              <p class="footer-note">ğŸ’¡ {{ release.note }}</p>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Future Outlook -->
    <section class="future-outlook container animate-fade-in">
      <div class="outlook-card glass-card">
        <div class="outlook-icon">ğŸš€</div>
        <h3>æœªæ¥å±•æœ›</h3>
        <p>
          æˆ‘ä»¬è‡´åŠ›äºæ‰“é€ æœ€ä¸“ä¸šã€æœ€çº¯ç²¹çš„å¼€å‘è€…å·¥å…·ç®±ã€‚æ›´å¤š AI
          é©±åŠ¨å‹å·¥å…·ã€ç¦»çº¿æ”¯æŒä»¥åŠæ¡Œé¢ç«¯è®¡åˆ’æ­£åœ¨ç­¹å¤‡ä¸­ã€‚
        </p>
        <div class="cta-links">
          <a href="https://github.com/van104/LRM-Toolbox" target="_blank" class="cta-btn github">
            <i class="fa-brands fa-github"></i> å‚ä¸å»ºè®¾
          </a>
          <router-link to="/" class="cta-btn primary">ç«‹å³æ¢ç´¢å·¥å…·</router-link>
        </div>
      </div>
    </section>
  </div>
</template>

<script setup>
  import { ref } from 'vue';

  const releases = ref([
    {
      version: 'v1.9.0',
      date: '2026-02-11',
      title: 'æ¶æ„é‡æ„ä¸äº¤äº’è‰ºæœ¯',
      color: 'var(--accent-purple)',
      groups: [
        {
          label: 'æ ¸å¿ƒé‡æ„',
          icon: 'ğŸ—ï¸',
          color: '#3b82f6',
          items: ['å®Œå…¨æ¨¡å—åŒ–çš„å¼‚æ­¥æŒ‰éœ€åŠ è½½ç³»ç»Ÿ', 'Router æ ‡é¢˜è‡ªåŠ¨åŒ–å¢å¼º', 'tools.ts ç²¾ç®€é‡æ„']
        },
        {
          label: 'äº¤äº’ç¾å­¦',
          icon: 'âœ¨',
          color: '#dc2626',
          items: ['View Transitions åœ†å½¢æ‰©æ•£ä¸»é¢˜åˆ‡æ¢', 'é¦–é¡µå·¥å…·æˆªæ–­å±•ç¤ºé€»è¾‘', 'æ²‰æµ¸å¼é¡µè„šé‡æ„']
        }
      ],
      note: 'æœ¬æ¬¡æ›´æ–°æ ‡å¿—ç€ LRM ä»â€œå·¥å…·å¹³é“ºâ€è¿ˆå‘â€œä¸“ä¸šåº”ç”¨æ¶æ„â€çš„å…³é”®ä¸€æ­¥ã€‚'
    },
    {
      version: 'v1.8.0',
      date: '2026-02-11',
      title: 'æ€§èƒ½ä¼˜åŒ–ä¸ä»£ç è´¨é‡',
      color: '#8b5cf6',
      groups: [
        {
          label: 'æ€§èƒ½',
          icon: 'âš¡',
          color: '#f59e0b',
          items: ['å¤§å·¥å…·æ•°æ®æ‹†åˆ†ä¸º JSON é™æ€èµ„æº', 'åˆæ¬¡åŠ è½½åŒ…ä½“ç§¯ä¼˜åŒ–']
        },
        {
          label: 'å·¥ç¨‹åŒ–',
          icon: 'ğŸ› ï¸',
          color: '#10b981',
          items: ['å…¨ç«™ Linter è­¦å‘Šæ¸…ç†', 'ESLint è§„åˆ™ç²¾ç®€ä¸ Prettier å†²çªä¿®å¤']
        }
      ]
    },
    {
      version: 'v1.7.0',
      date: '2026-02-10',
      title: 'ç»å…¸å·¥å…·æ·±åº¦ç„•æ–°',
      color: '#6366f1',
      groups: [
        {
          label: 'å·¥å…·å¢å¼º',
          icon: 'ğŸ®',
          color: '#ec4899',
          items: ['2048 æ¸¸æˆæ·±åº¦æ”¹ç‰ˆï¼šæ”¯æŒæ’¤é”€ã€å¤šç½‘æ ¼', 'PDF æ¨¡å‹å·¥å…·é€»è¾‘ç¨³å®šæ€§ä¿®å¤']
        },
        {
          label: 'SEO',
          icon: 'ğŸ”',
          color: '#06b6d4',
          items: ['å…ƒæ•°æ®é‡æ„ï¼Œå¤§å¹…æå‡ GitHub ä¸æœç´¢å¼•æ“å¯è§åº¦']
        }
      ]
    },
    {
      version: 'v1.5.0',
      date: '2026-02-04',
      title: 'è§†è§‰ 2.0 æ—¶ä»£',
      color: '#3b82f6',
      groups: [
        {
          label: 'UI/UX',
          icon: 'ğŸ¨',
          color: '#f43f5e',
          items: [
            'é¦–é¡µå¼•å…¥ Decrypted Text è§£å¯†ç‰¹æ•ˆ',
            'å·¥å…·å¡ç‰‡ 3D è§†å·®å€¾æ–œ',
            'å…¨å±€ç»ç’ƒæ‹Ÿæ€é£æ ¼ç»Ÿä¸€'
          ]
        }
      ]
    },
    {
      version: 'v1.0.0',
      date: '2026-01-20',
      title: 'ç ´æ™“ï¼šæ­£å¼èµ·èˆª',
      color: '#10b981',
      groups: [
        {
          label: 'é‡Œç¨‹ç¢‘',
          icon: 'ğŸ',
          color: '#10b981',
          items: ['æ ¸å¿ƒæ¡†æ¶æ­å»ºå®Œæˆ', 'é¦–æ‰¹ 50+ å¸¸ç”¨å¼€å‘å·¥å…·ä¸Šçº¿', 'ç§»åŠ¨ç«¯å“åº”å¼åˆæ­¥é€‚é…']
        }
      ]
    }
  ]);

  // ç®€å•çš„èƒ½æ•ˆå¤„ç†ï¼Œå¦‚æœéœ€è¦å¯ä»¥ç”¨æ­¤æŒ‡ä»¤é…åˆåŠ¨ç”»
  const onVisibilityChange = () => {
    // å¯ä»¥æ ¹æ®å¯è§æ€§æ§åˆ¶åŠ¨ç”»æ’­æ”¾
  };
</script>

<style scoped>
  .changelog-page {
    min-height: 100vh;
    background: var(--bg-primary);
    padding-top: var(--header-height);
    padding-bottom: 5rem;
    color: var(--text-primary);
  }

  .container {
    max-width: 1000px;
    margin: 0 auto;
    padding: 0 2rem;
  }

  /* Header Section */
  .changelog-header {
    padding: 5rem 0 3rem;
    text-align: center;
  }

  .gradient-title {
    font-size: 3.5rem;
    font-weight: 800;
    background: var(--accent-gradient);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 1rem;
  }

  .subtitle {
    font-size: 1.125rem;
    color: var(--text-muted);
    margin-bottom: 2.5rem;
  }

  .stats-bar {
    display: inline-flex;
    align-items: center;
    gap: 2rem;
    background: var(--bg-card);
    padding: 0.75rem 2rem;
    border-radius: 99px;
    border: 1px solid var(--border-color);
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
  }

  .stat-item {
    display: flex;
    flex-direction: column;
  }

  .stat-value {
    font-weight: 800;
    font-size: 1.25rem;
    color: var(--text-primary);
  }

  .stat-label {
    font-size: 0.75rem;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }

  .stat-divider {
    width: 1px;
    height: 24px;
    background: var(--border-color);
  }

  /* Timeline Layout */
  .timeline-container {
    margin-top: 3rem;
    position: relative;
  }

  .timeline-main {
    position: relative;
  }

  .timeline-node {
    display: flex;
    gap: 3rem;
    margin-bottom: 4rem;
  }

  .node-marker {
    display: flex;
    flex-direction: column;
    align-items: center;
    flex-shrink: 0;
  }

  .node-circle {
    width: 1.25rem;
    height: 1.25rem;
    border-radius: 50%;
    background: var(--bg-card);
    border: 4px solid var(--border-color);
    z-index: 2;
    transition: all 0.3s ease;
  }

  .timeline-node.is-latest .node-circle {
    background: var(--accent-purple);
    border-color: rgba(139, 92, 246, 0.2);
    box-shadow: 0 0 0 8px rgba(139, 92, 246, 0.1);
  }

  .node-line {
    flex: 1;
    width: 2px;
    background: linear-gradient(to bottom, var(--border-color) 0%, transparent 100%);
    margin-top: 0.5rem;
  }

  .node-content {
    flex: 1;
    padding: 2rem;
    border-radius: 20px;
    transition: transform 0.3s ease;
  }

  .node-content:hover {
    transform: translateX(10px);
  }

  .node-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1.5rem;
  }

  .version-badge {
    padding: 0.25rem 0.75rem;
    border-radius: 6px;
    font-weight: 800;
    font-size: 0.875rem;
    color: white;
  }

  .node-date {
    font-family: monospace;
    color: var(--text-muted);
    font-size: 0.9375rem;
  }

  .latest-label {
    margin-left: auto;
    font-size: 0.625rem;
    font-weight: 900;
    background: rgba(16, 185, 129, 0.1);
    color: #10b981;
    padding: 2px 8px;
    border-radius: 4px;
  }

  .node-title {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 2rem;
    color: var(--text-primary);
  }

  /* Change Groups */
  .change-groups {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 2rem;
  }

  .group-label {
    font-size: 0.875rem;
    font-weight: 800;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
    text-transform: uppercase;
  }

  .change-items {
    list-style: none;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  .change-items li {
    font-size: 0.9375rem;
    color: var(--text-secondary);
    line-height: 1.6;
    position: relative;
    padding-left: 1.25rem;
  }

  .change-items li::before {
    content: 'â†’';
    position: absolute;
    left: 0;
    color: var(--text-muted);
    font-weight: bold;
  }

  .node-footer {
    margin-top: 2rem;
    padding-top: 1.5rem;
    border-top: 1px dashed var(--border-color);
  }

  .footer-note {
    font-size: 0.875rem;
    color: var(--text-muted);
    font-style: italic;
  }

  /* Outlook Section */
  .future-outlook {
    margin-top: 5rem;
    margin-bottom: 5rem;
  }

  .outlook-card {
    text-align: center;
    padding: 4rem 2rem;
    border-radius: 24px;
  }

  .outlook-icon {
    font-size: 3rem;
    margin-bottom: 1.5rem;
  }

  .outlook-card h3 {
    font-size: 2rem;
    font-weight: 800;
    margin-bottom: 1rem;
  }

  .outlook-card p {
    color: var(--text-muted);
    margin-bottom: 2.5rem;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }

  .cta-links {
    display: flex;
    justify-content: center;
    gap: 1.5rem;
  }

  .cta-btn {
    padding: 0.75rem 2rem;
    border-radius: 12px;
    font-weight: 600;
    transition: all 0.3s;
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
  }

  .cta-btn.primary {
    background: var(--accent-purple);
    color: white;
  }

  .cta-btn.github {
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    color: var(--text-primary);
  }

  .cta-btn:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
  }

  @media (max-width: 768px) {
    .gradient-title {
      font-size: 2.5rem;
    }
    .timeline-node {
      gap: 1.5rem;
    }
    .change-groups {
      grid-template-columns: 1fr;
    }
    .stats-bar {
      gap: 1rem;
      padding: 0.5rem 1rem;
    }
    .cta-links {
      flex-direction: column;
    }
  }
</style>
